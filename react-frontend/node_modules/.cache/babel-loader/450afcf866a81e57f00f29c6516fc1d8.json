{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan Madalin\\\\Desktop\\\\ProiectPW\\\\react-frontend\\\\src\\\\components\\\\Account\\\\Account.js\";\nimport React from \"react\";\nimport axios from 'axios';\nimport './Account.scss';\nimport $ from 'jquery';\n\nclass Account extends React.Component {\n  constructor(props) {\n    super(props); // reasons to hate javascript: this\n\n    this.onLogin = this.onLogin.bind(this);\n    this.onRegister = this.onRegister.bind(this);\n    this.onLogout = this.onLogout.bind(this);\n    this.getLoginDropdown = this.getLoginDropdown.bind(this);\n    this.getRegisterDropdown = this.getRegisterDropdown.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.handleRegister = this.handleRegister.bind(this);\n    this.state = {\n      'login_message': '',\n      'register_message': '',\n      'register_email': '',\n      'register_username': '',\n      'register_password': '',\n      'register_first_name': '',\n      'register_last_name': '',\n      loginView: false,\n      registerView: false\n    };\n  }\n\n  onLogin() {\n    let params = new URLSearchParams();\n    params.append('username', this.state.login_username);\n    params.append('password', this.state.login_password);\n    axios.post('http://localhost:80/login', params).then(result => {\n      if ('role' in result.data) {\n        localStorage.setItem('role', result.data.role);\n      }\n\n      localStorage.setItem('username', result.data.username);\n      localStorage.setItem('token', result.data.token);\n      this.props.changeLoginStatus1(); // this.props.refresh();\n    }).catch(error => {\n      if ('response' in error) {\n        console.log(error.response);\n        this.setState({\n          'login_message': error.response.data.error\n        });\n        this.props.refresh();\n      } else {\n        console.log(error);\n      }\n    });\n  }\n\n  onRegister() {\n    if (this.state.register_email.length === 0 || this.state.register_username.length === 0 || this.state.register_password.length === 0 || this.state.register_first_name.length === 0 || this.state.register_last_name.length === 0) {\n      return;\n    }\n\n    let params = new URLSearchParams();\n    params.append('email', this.state.register_email);\n    params.append('username', this.state.register_username);\n    params.append('password', this.state.register_password);\n    params.append('first_name', this.state.register_first_name);\n    params.append('last_name', this.state.register_last_name);\n    axios.post('http://localhost:80/register', params).then(() => {\n      this.setState({\n        'register_message': 'Confirmation email sent',\n        'register_username': '',\n        'register_email': '',\n        'register_first_name': '',\n        'register_last_name': '',\n        'register_password': ''\n      }); // this.props.refresh();\n    }).catch(error => {\n      if ('response' in error) {\n        console.log(error.response);\n        this.setState({\n          'register_message': error.response.data.error\n        }); // this.props.refresh();\n      } else {\n        console.log(error);\n      }\n    });\n  }\n\n  onLogout() {\n    localStorage.removeItem('token');\n    localStorage.removeItem('role');\n    localStorage.removeItem('username');\n  }\n\n  handleLogin() {\n    this.setState({\n      loginView: !this.state.loginView,\n      registerView: false\n    });\n  }\n\n  handleRegister() {\n    this.setState({\n      registerView: !this.state.registerView,\n      loginView: false\n    });\n  }\n\n  getLoginDropdown() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: 'Dropdown',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    });\n  }\n\n  getRegisterDropdown() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: 'Dropdown',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: 'DropdownButton',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'DropdownContent',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: 'AccountForm',\n      onSubmit: this.onRegister,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: 'text',\n      size: '32',\n      value: this.state.register_email,\n      maxLength: '64',\n      placeholder: 'E-Mail',\n      pattern: '[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$',\n      onChange: event => {\n        this.setState({\n          'register_email': event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: 'text',\n      size: '32',\n      maxLength: '32',\n      placeholder: 'Username',\n      pattern: '.{4,}',\n      value: this.state.register_username,\n      onChange: event => {\n        this.setState({\n          'register_username': event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: 'text',\n      size: '32',\n      maxLength: '32',\n      placeholder: 'First name',\n      value: this.state.register_first_name,\n      onChange: event => {\n        this.setState({\n          'register_first_name': event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: 'text',\n      size: '32',\n      maxLength: '32',\n      placeholder: 'Last name',\n      value: this.state.register_last_name,\n      onChange: event => {\n        this.setState({\n          'register_last_name': event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: 'password',\n      size: '32',\n      maxLength: '32',\n      placeholder: 'Password',\n      pattern: '.{8,}',\n      value: this.state.register_password,\n      onChange: event => {\n        this.setState({\n          'register_password': event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: 'Submit',\n      type: 'submit',\n      value: 'Register',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: 'Message',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }\n    }, this.state.register_message))));\n  }\n\n  render() {\n    if (localStorage.getItem('token') !== null) {\n      return /*#__PURE__*/React.createElement(\"nav\", {\n        className: 'Account',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: 'Highlight',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 25\n        }\n      }, localStorage.getItem('username')), /*#__PURE__*/React.createElement(\"a\", {\n        href: '',\n        onClick: this.onLogout,\n        className: 'Logout',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }\n      }, \"(Log out)\")));\n    } else {\n      return /*#__PURE__*/React.createElement(\"nav\", {\n        className: 'Account',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'Dropdown',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: 'DropdownButton',\n        onClick: this.handleLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }\n      }, \"Login\"), this.state.loginView ? /*#__PURE__*/React.createElement(\"div\", {\n        className: 'DropdownContent',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: 'AccountForm',\n        onSubmit: this.onLogin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: 'text',\n        size: '32',\n        maxLength: '64',\n        placeholder: 'Username / E-Mail',\n        pattern: '.{4,}',\n        onChange: event => {\n          this.setState({\n            'login_username': event.target.value\n          });\n        },\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 37\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: 'password',\n        size: '32',\n        maxLength: '32',\n        placeholder: 'Password',\n        pattern: '.{4,}',\n        onChange: event => {\n          this.setState({\n            'login_password': event.target.value\n          });\n        },\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 37\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: 'Submit',\n        type: 'submit',\n        value: 'Login',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 37\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        className: 'Message',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 37\n        }\n      }, this.state.login_message))) : ''), /*#__PURE__*/React.createElement(\"div\", {\n        className: 'Dropdown',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: 'DropdownButton',\n        onClick: this.handleRegister,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 25\n        }\n      }, \"Register\"), this.state.registerView ? /*#__PURE__*/React.createElement(\"div\", {\n        className: 'DropdownContent',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: 'AccountForm',\n        onSubmit: this.onRegister,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: 'text',\n        size: '32',\n        value: this.state.register_email,\n        maxLength: '64',\n        placeholder: 'E-Mail',\n        pattern: '[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$',\n        onChange: event => {\n          this.setState({\n            'register_email': event.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 41\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: 'text',\n        size: '32',\n        maxLength: '32',\n        placeholder: 'Username',\n        pattern: '.{4,}',\n        value: this.state.register_username,\n        onChange: event => {\n          this.setState({\n            'register_username': event.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 41\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: 'text',\n        size: '32',\n        maxLength: '32',\n        placeholder: 'First name',\n        value: this.state.register_first_name,\n        onChange: event => {\n          this.setState({\n            'register_first_name': event.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 41\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: 'text',\n        size: '32',\n        maxLength: '32',\n        placeholder: 'Last name',\n        value: this.state.register_last_name,\n        onChange: event => {\n          this.setState({\n            'register_last_name': event.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 41\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: 'password',\n        size: '32',\n        maxLength: '32',\n        placeholder: 'Password',\n        pattern: '.{8,}',\n        value: this.state.register_password,\n        onChange: event => {\n          this.setState({\n            'register_password': event.target.value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 41\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        className: 'Submit',\n        type: 'submit',\n        value: 'Register',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 41\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        className: 'Message',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 41\n        }\n      }, this.state.register_message))) : ''));\n    }\n  }\n\n}\n\nexport default Account;","map":{"version":3,"sources":["C:/Users/Stefan Madalin/Desktop/ProiectPW/react-frontend/src/components/Account/Account.js"],"names":["React","axios","$","Account","Component","constructor","props","onLogin","bind","onRegister","onLogout","getLoginDropdown","getRegisterDropdown","handleLogin","handleRegister","state","loginView","registerView","params","URLSearchParams","append","login_username","login_password","post","then","result","data","localStorage","setItem","role","username","token","changeLoginStatus1","catch","error","console","log","response","setState","refresh","register_email","length","register_username","register_password","register_first_name","register_last_name","removeItem","event","target","value","register_message","render","getItem","login_message"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport './Account.scss';\nimport $ from 'jquery';\n\nclass Account extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // reasons to hate javascript: this\n        this.onLogin = this.onLogin.bind(this);\n        this.onRegister = this.onRegister.bind(this);\n        this.onLogout = this.onLogout.bind(this);\n        this.getLoginDropdown = this.getLoginDropdown.bind(this);\n        this.getRegisterDropdown = this.getRegisterDropdown.bind(this);\n        this.handleLogin = this.handleLogin.bind(this);\n        this.handleRegister = this.handleRegister.bind(this);\n\n        this.state = {\n            'login_message': '',\n            'register_message': '',\n            'register_email': '',\n            'register_username': '',\n            'register_password': '',\n            'register_first_name': '',\n            'register_last_name': '',\n            loginView: false,\n            registerView: false\n        };\n    }\n\n    onLogin() {\n        let params = new URLSearchParams();\n\n        params.append('username', this.state.login_username);\n        params.append('password', this.state.login_password);\n\n        axios.post(\n            'http://localhost:80/login',\n            params\n        ).then((result) => {\n            if ('role' in result.data) {\n                localStorage.setItem('role', result.data.role);\n            }\n\n            localStorage.setItem('username', result.data.username);\n            localStorage.setItem('token', result.data.token);\n\n            this.props.changeLoginStatus1();\n            // this.props.refresh();\n        }).catch((error) => {\n            if ('response' in error) {\n                console.log(error.response);\n\n                this.setState({ 'login_message': error.response.data.error });\n\n                this.props.refresh();\n            } else {\n                console.log(error);\n            }\n        });\n    };\n\n    onRegister() {\n        if (this.state.register_email.length === 0 ||\n            this.state.register_username.length === 0 ||\n            this.state.register_password.length === 0 ||\n            this.state.register_first_name.length === 0 ||\n            this.state.register_last_name.length === 0) {\n            return;\n        }\n\n        let params = new URLSearchParams();\n\n        params.append('email', this.state.register_email);\n        params.append('username', this.state.register_username);\n        params.append('password', this.state.register_password);\n        params.append('first_name', this.state.register_first_name);\n        params.append('last_name', this.state.register_last_name);\n\n        axios.post(\n            'http://localhost:80/register',\n            params\n        ).then(() => {\n            this.setState({\n                'register_message': 'Confirmation email sent',\n                'register_username': '',\n                'register_email': '',\n                'register_first_name': '',\n                'register_last_name': '',\n                'register_password': ''\n            });\n\n            // this.props.refresh();\n        }).catch((error) => {\n            if ('response' in error) {\n                console.log(error.response);\n\n                this.setState({ 'register_message': error.response.data.error });\n\n                // this.props.refresh();\n            } else {\n                console.log(error);\n            }\n        });\n    };\n\n    onLogout() {\n        localStorage.removeItem('token');\n        localStorage.removeItem('role');\n        localStorage.removeItem('username');\n    }\n\n    handleLogin() {\n\n        this.setState({\n            loginView: !this.state.loginView,\n            registerView: false\n        })\n    }\n\n    handleRegister() {\n\n        this.setState({\n            registerView: !this.state.registerView,\n            loginView: false\n        })\n    }\n    getLoginDropdown() {\n        return (\n            <div className={'Dropdown'}>\n\n\n            </div>\n        )\n    }\n\n    getRegisterDropdown() {\n        return (\n            <div className={'Dropdown'}>\n                <button className={'DropdownButton'}>Register</button>\n                <div className={'DropdownContent'}>\n                    <form className={'AccountForm'} onSubmit={this.onRegister}>\n                        <input type={'text'} size={'32'} value={this.state.register_email} maxLength={'64'}\n                            placeholder={'E-Mail'} pattern={'[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$'}\n                            onChange={(event) => {\n                                this.setState({ 'register_email': event.target.value });\n                            }} />\n                        <input type={'text'} size={'32'} maxLength={'32'} placeholder={'Username'}\n                            pattern={'.{4,}'} value={this.state.register_username} onChange={(event) => {\n                                this.setState({ 'register_username': event.target.value });\n                            }} />\n                        <input type={'text'} size={'32'} maxLength={'32'} placeholder={'First name'}\n                            value={this.state.register_first_name} onChange={(event) => {\n                                this.setState({ 'register_first_name': event.target.value });\n                            }} />\n                        <input type={'text'} size={'32'} maxLength={'32'} placeholder={'Last name'}\n                            value={this.state.register_last_name} onChange={(event) => {\n                                this.setState({ 'register_last_name': event.target.value });\n                            }} />\n                        <input type={'password'} size={'32'} maxLength={'32'} placeholder={'Password'}\n                            pattern={'.{8,}'} value={this.state.register_password} onChange={(event) => {\n                                this.setState({ 'register_password': event.target.value });\n                            }} />\n                        <input className={'Submit'} type={'submit'} value={'Register'} />\n                        <p className={'Message'}>{this.state.register_message}</p>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n\n    render() {\n        if (localStorage.getItem('token') !== null) {\n            return (\n                <nav className={'Account'}>\n                    <p>\n                        <span className={'Highlight'}>\n                            {localStorage.getItem('username')}\n                        </span>\n                        <a href={''} onClick={this.onLogout} className={'Logout'}>\n                            (Log out)\n                        </a>\n                    </p>\n                </nav>\n            )\n        } else {\n            return (\n                <nav className={'Account'}>\n                    <div className={'Dropdown'}>\n                        <button className={'DropdownButton'} onClick={this.handleLogin}>Login</button>\n                        {this.state.loginView ?\n                            <div className={'DropdownContent'}>\n                                <form className={'AccountForm'} onSubmit={this.onLogin}>\n                                    <input type={'text'} size={'32'} maxLength={'64'} placeholder={'Username / E-Mail'}\n                                        pattern={'.{4,}'} onChange={(event) => {\n                                            this.setState({ 'login_username': event.target.value });\n                                        }} required />\n                                    <input type={'password'} size={'32'} maxLength={'32'} placeholder={'Password'}\n                                        pattern={'.{4,}'} onChange={(event) => {\n                                            this.setState({ 'login_password': event.target.value });\n                                        }} required />\n                                    <input className={'Submit'} type={'submit'} value={'Login'} />\n                                    <p className={'Message'}>{this.state.login_message}</p>\n                                </form>\n                            </div> : ''\n                        }\n                    </div>\n\n                    <div className={'Dropdown'}>\n                        <button className={'DropdownButton'} onClick={this.handleRegister}>Register</button>\n                        {\n                            this.state.registerView ?\n\n                                <div className={'DropdownContent'}>\n                                    <form className={'AccountForm'} onSubmit={this.onRegister}>\n                                        <input type={'text'} size={'32'} value={this.state.register_email} maxLength={'64'}\n                                            placeholder={'E-Mail'} pattern={'[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$'}\n                                            onChange={(event) => {\n                                                this.setState({ 'register_email': event.target.value });\n                                            }} />\n                                        <input type={'text'} size={'32'} maxLength={'32'} placeholder={'Username'}\n                                            pattern={'.{4,}'} value={this.state.register_username} onChange={(event) => {\n                                                this.setState({ 'register_username': event.target.value });\n                                            }} />\n                                        <input type={'text'} size={'32'} maxLength={'32'} placeholder={'First name'}\n                                            value={this.state.register_first_name} onChange={(event) => {\n                                                this.setState({ 'register_first_name': event.target.value });\n                                            }} />\n                                        <input type={'text'} size={'32'} maxLength={'32'} placeholder={'Last name'}\n                                            value={this.state.register_last_name} onChange={(event) => {\n                                                this.setState({ 'register_last_name': event.target.value });\n                                            }} />\n                                        <input type={'password'} size={'32'} maxLength={'32'} placeholder={'Password'}\n                                            pattern={'.{8,}'} value={this.state.register_password} onChange={(event) => {\n                                                this.setState({ 'register_password': event.target.value });\n                                            }} />\n                                        <input className={'Submit'} type={'submit'} value={'Register'} />\n                                        <p className={'Message'}>{this.state.register_message}</p>\n                                    </form>\n                                </div> : ''\n                        }\n                    </div>\n                </nav>\n            );\n        }\n    }\n}\n\nexport default Account;"]},"metadata":{},"sourceType":"module"}